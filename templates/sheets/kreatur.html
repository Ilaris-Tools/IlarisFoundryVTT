<form class="{{cssClass}} kreatur-sheet">
    <header class="sheet-header kreatur-header">
        <div style="display: flex; justify-content: space-between;">
            <div class="header-fields">
                <input class="titel-input" style="" name="name" type="text" value="{{actor.name}}" placeholder="Name"/>
                <textarea rows="2" name="data.kurzbeschreibung" type="text">{{data.data.kurzbeschreibung}}</textarea>
            </div>
            <img class="profile-img" src="{{actor.img}}" data-edit="img" title="{{actor.name}}" height="100" width="100"/>
        </div>
    </header>

    <div class="sheet-body">
        <div class="status statblockreihe">
            <div class="flexrow">
                <div class="flexcol">
                    <div>
                        <label>Wunden/Erschöpft: </label>
                        <input class="hp-update" name="data.gesundheit.wunden" type="text" value="{{data.data.gesundheit.wunden}}" data-dtype="Number"/>/
                        <input class="hp-update" name="data.gesundheit.erschoepfung" type="text" value="{{data.data.gesundheit.erschoepfung}}" data-dtype="Number"/>
                    </div>
                    <div>
                        <a
                        class="icon-small toggle-bool {{data.data.gesundheit.wundenignorieren}}"
                        data-togglevariable="data.gesundheit.wundenignorieren">
                        <!-- <i class="fa fa-check"></i> -->
                        Wundabzüge ignorieren
                        </a>
                    </div>
<!--                     <div>
                        <label>Furcht: </label>
                        <input class="hp-update" name="data.furcht.furchtstufe" type="text" value="{{data.data.furcht.furchtstufe}}" data-dtype="Number"/>
                    </div> -->
                    <label>Schip*: </label><input name="data.schips.schips_stern" value="{{data.data.schips.schips_stern}}" type="text" data-dtype="Number"/>
                </div>
                <div class="flexcol">
                    <label>{{data.data.gesundheit.display}}</label>
                    <label>{{data.data.furcht.display}}</label>
                    <div class="flexrow">
                        <label>Manueller Mod: </label>
                        <input name="data.modifikatoren.manuellermod" value="{{data.data.modifikatoren.manuellermod}}" type="text" data-dtype="Number">
                    </div>
                    <hr/>
                    <div class="flexrow">
                        <label>{{data.data.abgeleitete.globalermoddisplay}}</label>
                    </div>
                </div>
            </div>
        </div>

        <div class="attribute statblockreihe">
            <b>Attribute <!--</b><a class="attribut-create">[+]</a><b>-->: </b>
            <div class="flexrow">
                {{#each data.data.attribute as |attribut key|}}
                <div class="attributblock flex1 flex-group-center">
                        <h2>{{key}}</h2>
                    <div>
                        <input name="data.attribute.{{key}}.pw" type="text" value="{{attribut.pw}}" data-dtype="Number" style="width: 30px;"></input>
<!--                         <a
                            class="rollable icon-small"
                            data-rolltype="basic"
                            data-formula="3d20dl1dh1+{{attribut.pw}}"
                            data-label="{{key}}"
                            ><i class="fas fa-dice-d20"></i
                        ></a> -->
                        <a class="rollable icon-small" data-rolltype="attribut_diag" data-attribut="{{key}}">
                            <i class="fas fa-dice-d20"></i>
                        </a>
                    </div>
                </div>
                {{/each}}
            </div>
        </div>
        
        <div class="eigenschaften statblockreihe">
            <b>Eigenschaften </b><a class="item-create plus-button" data-itemclass="eigenschaft">[+]</a><b>: </b>
                {{#each data.data.eigenschaften as |eigenschaft|}}
                    <a class="item-edit" data-itemid="{{eigenschaft.id}}">{{eigenschaft.name}}, </a>
                {{/each}}
        </div>
        
        <div class="vorteile statblockreihe">
            <b>Vorteile </b><a class="clickable plus-button" data-clicktype="addvorteilinfo">[+]</a><b>: </b>
                {{#each data.data.vorteile as |vorteil|}}
                    <a class="item-edit" data-itemid="{{vorteil.id}}">{{vorteil.name}}</a>, 
                {{/each}}
        </div>

        <div class="kampfwerte statblockreihe">
            <b>Kampfwerte: </b>
            <div class="flexrow" style="float: right">
                <label>{{data.data.abgeleitete.nahkampfmoddisplay}}</label>
            </div>
            <br/>
            {{#each data.data.kampfwerte as |obj key|}}
                {{#if (ifEq key "ws")}}
                    <label>{{get_label key}}: </label>
                    <input name="data.kampfwerte.{{key}}" value="{{obj}}" data-dtype="Number"/>/ 
                {{else}}
                    {{#if (ifEq key "ws_stern")}}
                    <input name="data.kampfwerte.{{key}}" value="{{obj}}" data-dtype="Number"/>, 
                    {{else}}
                    <label>{{get_label key}}: </label>
                    <input name="data.kampfwerte.{{key}}" value="{{obj}}" data-dtype="Number"/>, 
                    {{/if}}
                {{/if}}
            {{/each}}
        </div>

        <div class="angriffe statblockreihe">
            <b>Angriffe </b><a class="item-create plus-button" data-itemclass="angriff">[+]</a><b>: </b>
            {{#each data.data.angriffe as |angriff key|}}
            <div class="flexrow">
                        
                <label><b><a class="item-edit" data-itemid="{{angriff.id}}">{{angriff.name}} </a></b></label>
                {{#if (waffe_ist_fernkampf angriff) }}
                <label>
                    LZ: {{angriff.data.data.lz}}
                </label>
                {{/if}}
                <label>RW: {{angriff.data.data.rw}}</label>
                <label
                    class="rollable onhover"
                    data-rolltype="at"
                    data-pw="{{angriff.data.data.at}}"
                    data-item="{{angriff.name}}"
                    data-itemid="{{angriff.id}}"
                    >AT: {{angriff.data.data.at}}</label
                >
                <label
                    class="rollable onhover"
                    data-rolltype="vt"
                    data-pw="{{angriff.data.data.vt}}"
                    data-item="{{angriff.name}}"
                    data-itemid="{{angriff.id}}"
                    >VT: {{angriff.data.data.vt}}</label
                >
                <label>
                    <a
                    class="rollable icon-small"
                    data-rolltype="basic"
                    data-formula="{{translate_formula angriff.data.data.tp}}"
                    data-label="Schaden ({{angriff.name}})"
                    >TP: {{angriff.data.data.tp}}</a> 
                </label>
                <label>HT: {{angriff.data.data.haerte}}</label>
                <!-- <label>
                    <a
                    class="rollable icon-small"
                    data-rolltype="basic"
                    data-formula="1d20+{{angriff.data.data.at}}"
                    data-label="Attacke ({{angriff.name}})"
                    ><i class="fas fa-dice-d20"></i
                    ></a> 
                    AT: {{angriff.data.data.at}}
                </label> 
                <label>
                <a
                    class="rollable icon-small"
                    data-rolltype="basic"
                    data-formula="1d20+{{angriff.data.data.vt}}"
                    data-label="Verteidigung ({{angriff.name}})"
                    ><i class="fas fa-dice-d20"></i
                    ></a> 
                VT: {{angriff.data.data.vt}}</label>
                <label>
                <a
                    class="rollable icon-small"
                    data-rolltype="basic"
                    data-formula="{{translate_formula angriff.data.data.tp}}"
                    data-label="Schaden ({{angriff.name}})"
                    ><i class="fas fa-dice-d20"></i
                    ></a> 
                    TP: {{angriff.data.data.tp}}</label>
                <label>HT: {{angriff.data.data.haerte}}</label> -->
            </div>
            <div><label>
                {{#each angriff.data.data.eigenschaften as |eig|}}
                    <span>{{eig.name}}, </span>
                {{/each}}
            </label></div>
            {{/each}}
        </div>


        <div class="freietalente statblockreihe">
            <b>Fertigkeiten</b><a class="item-create plus-button" data-itemclass="freiestalent">[+]</a><b>: </b><br/>
            {{#each data.data.freietalente as |freiestalent key|}}
            <label>
                <label>
                    <a class="item-edit" data-itemid="{{freiestalent.id}}">{{freiestalent.name}} </a> (
                    <label
                    class="rollable onhover"
                    data-rolltype="profan_fertigkeit_pw"
                    data-fertigkeit="{{freiestalent.name}}"
                    data-pw="{{freiestalent.data.data.pw}}"
                    >{{freiestalent.data.data.pw}}</label
                >  
<!--                     <a
                        class="rollable icon-small"
                        data-rolltype="basic"
                        data-formula="3d20dl1dh1+{{freiestalent.data.data.pw}}"
                        data-label="{{freiestalent.name}}"
                        ><i class="fas fa-dice-d20"></i
                        >
                    </a> -->
                    <a
                        class="rollable icon-small"
                        data-rolltype="simpleprobe_diag"
                        data-name="{{freiestalent.name}}"
                        data-pw="{{freiestalent.data.data.pw}}"
                        ><i class="fas fa-dice-d20"></i
                    ></a>
                    ), 
                </label> 
            </label>
            {{/each}}
        </div>
        
        
        <div class="infos statblockreihe">
            <b>Infos</b><a class="item-create plus-button" data-itemclass="info">[+]</a><b>: </b><br/>
            {{#each data.data.infos as |info|}}
            <div class="hangingindent">
                <b><a class="item-edit" data-itemid="{{info.id}}">{{info.name}}</a>:</b>
                {{info.data.data.text}}
            </div>
            {{/each}}
        </div>
    </div>
</form>
