<form class="{{cssClass}} kreatur-sheet">
    <header class="sheet-header kreatur-header">
        <div style="display: flex; justify-content: space-between;">
            <div class="header-fields">
                <input class="titel-input" style="" name="name" type="text" value="{{actor.name}}" placeholder="Name"/>
                <textarea rows="2" name="data.kurzbeschreibung" type="text">{{data.data.kurzbeschreibung}}</textarea>
            </div>
            <img class="profile-img" src="{{actor.img}}" data-edit="img" title="{{actor.name}}" height="100" width="100"/>
    </header>

    <div class="sheet-body">

        <div class="status statblockreihe">
            <div class="flexrow">
                <div class="flexcol">
                    <div>
                        <label>Wunden/Erschöpft: </label>
                        <input class="hp-update" name="data.gesundheit.wunden" type="text" value="{{data.data.gesundheit.wunden}}" data-dtype="Number"/>/
                        <input class="hp-update" name="data.gesundheit.erschoepfung" type="text" value="{{data.data.gesundheit.erschoepfung}}" data-dtype="Number"/>

                    </div>
                    <div>
                        <label>Furcht: </label>
                        <input class="hp-update" name="data.furcht.furchtstufe" type="text" value="{{data.data.furcht.furchtstufe}}" data-dtype="Number"/>
                    </div>
                </div>
                <div class="flexcol">
                    <label>{{data.data.gesundheit.display}}</label>
                    <label>{{data.data.furcht.display}}</label>
                </div>
            </div>
        </div>

        <div class="attribute statblockreihe">
            <b>Attribute </b><a class="attribut-create">[+]</a><b>: </b>
            <div class="flexrow">
                {{#each data.data.attribute as |attribut key|}}
                <div class="attributblock flex1 flex-group-center">
                        <h2>{{key}}</h2>
                    <div>
                        <input name="data.attribute.{{key}}.pw" type="text" value="{{attribut.pw}}" data-dtype="Number" style="width: 30px;"></input>
                        <a
                            class="rollable icon-small"
                            data-rolltype="basic"
                            data-formula="1d20+{{attribut.pw}}"
                            data-label="{{key}}"
                            ><i class="fas fa-dice-d20"></i
                        ></a>
                    </div>
                </div>
                {{/each}}
            </div>
        </div>
        
        <div class="eigenschaften statblockreihe">
            <b>Eigenschaften </b><a class="item-create plus-button" data-itemclass="eigenschaft">[+]</a><b>: </b>
                {{#each data.data.eigenschaften as |eigenschaft|}}
                    <a class="item-edit" data-itemid="{{eigenschaft.id}}">{{eigenschaft.name}}, </a>
                {{/each}}
        </div>
        
        <div class="vorteile statblockreihe">
            <b>Vorteile: </b>
                {{#each data.data.vorteile as |vorteil|}}
                    <a class="item-edit" data-itemid="{{vorteil.id}}">{{vorteil.name}}</a>, 
                {{/each}}
        </div>

        <div class="kampfwerte statblockreihe">
            <b>Kampfwerte: </b>
            {{#each data.data.kampfwerte as |obj key|}}
                {{#if (ifEq key "ws")}}
                    <label>{{get_label key}}: </label>
                    <input name="data.kampfwerte.{{key}}" value="{{obj}}" data-dtype="Number"/>/ 
                    <input name="data.kampfwerte.ws_stern" value="{{data.kampfwerte.ws_stern}}" data-dtype="Number"/>, 
                {{else}}
                    {{#if (ifEq key "ws_stern")}}
                    {{else}}
                    <label>{{get_label key}}: </label>
                    <input name="data.kampfwerte.{{key}}" value="{{obj}}" data-dtype="Number"/>, 
                    {{/if}}
                {{/if}}
            {{/each}}
        </div>

        <div class="angriffe statblockreihe">
            <b>Angriffe: </b>
            {{#each data.data.angriffe as |angriff|}}
            <div class="flexrow">
            <label><b>{{angriff.name}}</b></label>
            {{#if (waffe_ist_fernkampf angriff) }}
            <label>LZ: {{angriff.data.lz}}</label>
            {{/if}}
            <label>RW: {{angriff.data.rw}}</label>
            <label>
                <a
                class="rollable icon-small"
                data-rolltype="basic"
                data-formula="1d20+{{angriff.data.at}}"
                data-label="Attacke ({{angriff.name}})"
                ><i class="fas fa-dice-d20"></i
                ></a> 
                AT: {{angriff.at}}
            </label>
            <label>
            <a
                class="rollable icon-small"
                data-rolltype="basic"
                data-formula="1d20+{{angriff.data.vt}}"
                data-label="Verteidigung ({{angriff.name}})"
                ><i class="fas fa-dice-d20"></i
                ></a> 
            VT: {{angriff.data.vt}}</label>
            <label>
            <a
                class="rollable icon-small"
                data-rolltype="basic"
                data-formula="{{translate_formula angriff.data.tp}}"
                data-label="Schaden ({{angriff.name}})"
                ><i class="fas fa-dice-d20"></i
                ></a> 
                TP: {{angriff.data.tp}}</label>
            <label>HT: {{angriff.data.haerte}}</label>
            </div>
            <div><label>{{angriff.data.eigenschaften}}</label></div>
            {{/each}}
        </div>




        {{#if data.data.fertigkeiten}}
        <div class="statblockreihe">
            <b>Übernatürlich: </b><br/>
            {{#if data.data.asp}}
            <label>Astralpunkte: {{data.data.asp}}</label><br/>
            {{/if}}
            {{#if data.data.gup}}
            <label>Gunstpunkte: {{data.data.gup}}, </label><br/>
            {{/if}}
            {{#if data.data.kap}}
            <label>Karmalpunkte: {{data.data.kap}}, </label><br/>
            {{/if}}
            {{#each data.data.fertigkeiten as |fertigkeit|}}
            <label>
            <a
                class="rollable icon-small"
                data-rolltype="basic"
                data-formula="3d20dl1dh1+{{fertigkeit.wert}}"
                data-label="{{fertigkeit.name}}"
                ><i class="fas fa-dice-d20"></i
                ></a>
                {{fertigkeit.name}} ({{fertigkeit.wert}}): 
                {{#each fertigkeit.talente as |talent|}}
                    {{talent.name}}: {{talent.wert}}
                {{/each}}
            </label><br/>
            {{/each}}
        </div>
        {{/if}}
        {{#if data.data.talente }}
        <div class="statblockreihe">
            <b>Talente: </b><br/>
            {{#each data.data.talente as |talent|}}
            <label>
            <a
                class="rollable icon-small"
                data-rolltype="basic"
                data-formula="3d20dl1dh1+{{talent.wert}}"
                data-label="{{talent.name}}"
                ><i class="fas fa-dice-d20"></i
                ></a>
                {{talent.name}}: {{talent.wert}}, 
            </label>
            {{/each}}
        </div>
        {{/if}}
    </div>
</form>
