{{log 'vorteil' this}}
<form class="{{cssClass}}">
    <div>
        <input class="titel-input" name="name" type="text" value="{{item.name}}" />
        <hr />
        <div class="flexrow">
            <label><b>Kategorie:</b></label>
            <select name="system.gruppe">
                {{selectOptions vorteilsgruppen selected=item.system.gruppe valueAttr='value'
                labelAttr='label' }}
            </select>
        </div>
        <div class="flexrow">
            <label><b>Voraussetzung:</b></label>
            <input
                name="system.voraussetzung"
                value="{{item.system.voraussetzung}}"
                type="text"
                data-dtype="String"
            />
        </div>
        <div>
            <label><b>Beschreibung:</b></label>
            <textarea rows="8" name="system.text">{{item.system.text}}</textarea>
        </div>
        {{#if (ifEq item.system.gruppe "3")}}
        <div class="flexrow">
            <label><b>Sephrasto Script:</b><i class="fas fa-info-circle" 
               title="Hier kannst du das Sephrasto Script modifyKampfstil('Kampfstilname', 1, 1, 1, 0, 0) eintragen. Die Parameter modifizieren deine Werte in der folgenden Reihenfolge: AT, VT, DMG, RW, BE"
               style="margin-left: 5px; cursor: help;"></i></label>
            <input
                name="system.script"
                value="{{item.system.script}}"
                type="text"
                data-dtype="String"
            />
        </div>
        <div class="flexrow">
            <label><b>Stilbedingungen:</b><i class="fas fa-info-circle" 
               data-tooltip="<div style='max-width: 400px; text-align: left;'>
                   <h4 style='margin: 0 0 10px 0; color: #4b5563;'>Kampfstil Bedingungen</h4>
                   <p style='margin: 0 0 10px 0;'>Die Stilbedingungen bestimmen, welche Voraussetzungen erfüllt sein müssen, damit der Kampfstil aktiv ist:</p>
                   <ul style='margin: 0; padding-left: 20px;'>
                       <li style='margin-bottom: 5px;'><strong>Leeres Feld:</strong> Kampfstil ist immer aktiv</li>
                       <li style='margin-bottom: 5px;'><strong>Trennung:</strong> Einzelne Bedingungen mit Komma trennen<br><em>Beispiel: 'beritten, Schild'</em></li>
                       <li style='margin-bottom: 5px;'><strong>Reittier:</strong> 'beritten' oder 'nicht beritten'</li>
                       <li style='margin-bottom: 5px;'><strong>Waffeneigenschaften:</strong> Direkt angeben<br><em>Beispiele: 'Schild', 'Parierwaffe', 'Wendig'</em></li>
                       <li style='margin-bottom: 5px;'><strong>Waffentypen:</strong><br>
                           • 'nahkampfwaffe' oder 'fernkampfwaffe'<br>
                           • 'einzelne nahkampfwaffe' = nur eine Nahkampfwaffe<br>
                           • 'zwei einhändige nahkampfwaffen' = zwei Waffen</li>
                       <li style='margin-bottom: 5px;'><strong>Fertigkeiten:</strong> 'Fertigkeit <Name>'<br><em>Beispiel: 'Fertigkeit Wurfwaffen'</em></li>
                   </ul>
               </div>"
               style="margin-left: 5px; cursor: help;"></i></label>
            <input
                name="system.bedingungen"
                value="{{item.system.bedingungen}}"
                type="text"
                data-dtype="String"
            />
        </div>
        <div class="flexrow">
            <label><b>Foundry Script:</b><i class="fas fa-info-circle" 
               data-tooltip="<div style='max-width: 500px; text-align: left;'>
                   <h4 style='margin: 0 0 10px 0; color: #4b5563;'>Foundry Script Methoden</h4>
                   <p style='margin: 0 0 10px 0;'>Verfügbare Methoden für Kampfstil-Modifikationen:</p>
                   <ul style='margin: 0; padding-left: 20px;'>
                       <li style='margin-bottom: 8px;'>
                           <strong>ignoreSideWeaponMalus(NW, Eigenschaft)</strong><br>
                           <em>Ignoriert Erschwernisse für Nebenwaffe</em><br>
                           <small>Parameter: NW = Nebenwaffe, Eigenschaft optional</small>
                       </li>
                       <li style='margin-bottom: 8px;'>
                           <strong>affectsRangedWeaponOnly()</strong><br>
                           <em>Modifier wirken nur auf Fernkampfwaffen</em><br>
                           <small>VT-Modifier wird deaktiviert</small>
                       </li>
                       <li style='margin-bottom: 8px;'>
                           <strong>ignoreMountedRangePenalty(HW, NW, ist_beritten)</strong><br>
                           <em>Ignoriert Fernkampf-Malus beim Reiten</em><br>
                           <small>Parameter: HW = Hauptwaffe, NW = Nebenwaffe</small>
                       </li>
                       <li style='margin-bottom: 8px;'>
                           <strong>manoverAusgleich(HW, NW, Wert)</strong><br>
                           <em>Setzt Manöverausgleich für Kampfstil</em><br>
                           <small>Wert = Manöverausgleichwert (Zahl)</small>
                       </li>
                   </ul>
                   <p style='margin: 10px 0 0 0; font-weight: bold; color: #dc2626;'>
                       ⚠️ Mehrere Methoden mit Semikolon trennen
                   </p>
               </div>"
               style="margin-left: 5px; cursor: help;"></i></label>
            <input
                name="system.foundryScript"
                value="{{item.system.foundryScript}}"
                type="text"
                data-dtype="String"
            />
        </div>
        {{/if}}
        <hr />
        <a class="item-delete" data-itemid="{{item._id}}">
            <button class="clickable" type="button">
                Vorteil Löschen
                <i class="fas fa-trash"></i>
            </button>
        </a>
    </div>
</form>
